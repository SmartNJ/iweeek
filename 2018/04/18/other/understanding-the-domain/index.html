<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="浅谈域名"/>




  <meta name="keywords" content="域名, 毁于随" />










  <link rel="alternate" href="/atom.xml" title="毁于随">




  <link rel="shortcut icon" type="image/x-icon" href="/icon_ios7.png?v=2.6.0" />



<link rel="canonical" href="http://www.iweeek.com/2018/04/18/other/understanding-the-domain/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  


  <script id="google_analytics">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-102765380-1', 'auto');
        ga('send', 'pageview');
  </script>


  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "2JbLYIPhKt2NzUDtxAz8m4eL-gzGzoHsz",
      appKey: "emG4bvM4WSlRew7VB7p13lxw"
    });
  </script>





    <title> 浅谈域名 - 毁于随 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">毁于随</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/photos/">
        <li class="mobile-menu-item">
          
          
            相册
          
        </li>
      </a>
    
      <a href="/tags/">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/categories/">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/resume/index.html">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">毁于随</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/photos/">
            
            
              相册
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/resume/index.html">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main" style="line-height: 180%;">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          浅谈域名
        
      </h1>
      
      <div class="post-meta">
        <span class="post-author">
           作者: <a href="https://www.iweeek.com/"> 毁于随 </a>
        </span>
        <span class="post-time">
           日期: 2018-04-18
        </span>
        
          <div class="post-category">
            
              <a href="/categories/网站/">网站</a>
            
              <a href="/categories/网站/域名/">域名</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2018/04/18/other/understanding-the-domain/"
             data-title="浅谈域名">
            阅读次数
          </div>
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#域名（Domain-Name）"><span class="toc-text">域名（Domain Name）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#根域（DNS-Root-Zone）"><span class="toc-text">根域（DNS Root Zone）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#顶级域名（Top-level-Domain-TLD）"><span class="toc-text">顶级域名（Top-level Domain - TLD）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#完全限定域名（Fully-Qualified-Domain-Name-FQDN）"><span class="toc-text">完全限定域名（Fully Qualified Domain Name - FQDN）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二级域名（Second-level-domain）"><span class="toc-text">二级域名（Second-level domain）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域名（Subdomain-Name）"><span class="toc-text">子域名（Subdomain Name）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#域名系统（Domain-Name-System-DNS）"><span class="toc-text">域名系统（Domain Name System - DNS）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是域名系统？"><span class="toc-text">什么是域名系统？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#干什么用的？"><span class="toc-text">干什么用的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS-是如何工作的？"><span class="toc-text">DNS 是如何工作的？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#A-记录（A-Record）"><span class="toc-text">A 记录（A Record）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CNAME-记录（Canonical-Name-Record）"><span class="toc-text">CNAME 记录（Canonical Name Record）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NS-记录（Name-Serve-Record）"><span class="toc-text">NS 记录（Name Serve Record）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS-解析的工作流程"><span class="toc-text">DNS 解析的工作流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#告诉-GitHub-你的域名"><span class="toc-text">告诉 GitHub 你的域名</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>前段时间创建了 <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> 之后，随便也申请了一个属于我自己的域名。那么从申请域名到最后的设置自定义 GitHub Pages 域名，中间到底究竟发生了什么，本文就来说说离我们并不遥远的<strong>「域名」</strong>。</p>
<a id="more"></a>
<hr>
<h2 id="域名（Domain-Name）"><a href="#域名（Domain-Name）" class="headerlink" title="域名（Domain Name）"></a>域名（Domain Name）</h2><p>域名就是一串由点分隔的文字，更具体地说，是一段人类容易识别的文字，它的作用很简单，就是给一个 IP 取一个人们都够记住他的名字。域名是不区分大小写的。</p>
<h2 id="根域（DNS-Root-Zone）"><a href="#根域（DNS-Root-Zone）" class="headerlink" title="根域（DNS Root Zone）"></a>根域（DNS Root Zone）</h2><p>通常我们知道的域名，例如 <code>example.com</code> ，其实是完整域名的缩写。真正的全称为 <code>example.com.</code>，请注意最后的<code>.</code>，这个就是根域。它的现实体现为全球的 13 台<strong>固定 IP</strong> 的<strong>根域名服务器</strong>（root zone name servers），从 <code>a.root-servers.net</code> 到 <code>m.root.servers.net</code> 。在下文<code>完全限定域名</code>中还会提到它。</p>
<p>当我们在进行 DNS 查询的时候，如果一个全新的域名从来没有进行过查询，那么，最终会向这 13 台根域服务器进行请求。不过，现在的浏览器已经基本上默认不再添加这个「多余」的点了。</p>
<p>事实上，并不是真正的 13 台，而是 13 组，每一台在全球都有很多的镜像节点，所以你不用担心其中一台挂了会引起全球混乱。</p>
<h2 id="顶级域名（Top-level-Domain-TLD）"><a href="#顶级域名（Top-level-Domain-TLD）" class="headerlink" title="顶级域名（Top-level Domain - TLD）"></a>顶级域名（Top-level Domain - TLD）</h2><blockquote>
<p>A top-level domain (TLD) is one of the domains at the highest level in the hierarchical Domain Name System of the Internet. The top-level domain names are installed in the root zone of the name space. For all domains in lower levels, it is the last part of the domain name, that is, the last label of a fully qualified domain name. For example, in the domain name <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a>, the top-level domain is <code>com.</code></p>
</blockquote>
<p><strong>顶级域名</strong>，是域名系统中层次最高的域名，具体表现为低级域名的最后一部分。例如：<code>iweeek.com</code> 其中的<code>.com</code>就是一个顶级域名，它是一种「不完全限定域名」（partially qualified domain name - PQDN）。</p>
<p>常用的顶级域名分为几种：</p>
<ol>
<li>国家顶级域名，例如<code>.cn</code>, <code>.jp</code></li>
<li>机构顶级域名，例如<code>.com</code>, <code>.edu</code>, <code>.org</code></li>
<li>还有其他分类</li>
</ol>
<h2 id="完全限定域名（Fully-Qualified-Domain-Name-FQDN）"><a href="#完全限定域名（Fully-Qualified-Domain-Name-FQDN）" class="headerlink" title="完全限定域名（Fully Qualified Domain Name - FQDN）"></a>完全限定域名（Fully Qualified Domain Name - FQDN）</h2><p>在介绍「完全限定域名」之前（和上文提到过「不完全限定域名」），先来看张图：</p>
<p><img src="http://p748dqat4.bkt.clouddn.com/The-hierarchy-of-labels-in-a-fully-qualified-domain%E2%80%93name.png" alt="完全限定域名的层次结构图"></p>
<p>这是一张完全限定域名的层次结构图，<code>ru.wikipedia.org.</code>中每一个被<code>.</code>分隔开的部分，在树形层次结构图中体现到具体的一个节点，根据树的数据结构特点，每个完全限定域名都是唯一的，也就是说，不存在歧义。另外，每一级域名控制它下一级的域名分配。</p>
<p>因为 DNS 的根域名（<strong>ROOT</strong>） 没有被命名，所以它以空字符串表示，体现在域名上，就用 <code>.</code> 代替表示为 <strong>ROOT</strong>。例如：<code>www.iweeek.com.</code>，显式地指定一个绝对域名，以空白的顶级域名标签结束（虽然末尾只看到<code>.</code>）。</p>
<p>下图是「完全限定域名」的一个例子：<br><img src="http://p748dqat4.bkt.clouddn.com/domain-example.jpg" alt=""></p>
<h2 id="二级域名（Second-level-domain）"><a href="#二级域名（Second-level-domain）" class="headerlink" title="二级域名（Second-level domain）"></a>二级域名（Second-level domain）</h2><p>一般我们所说的申请域名，就是申请的二级域名，在顶级域名的左侧加上一个自定义文字段。例如：<code>iweeek.com</code>。写到这里，肯定有人问，是不是有 N 级域名呢？答案是肯定的，形如</p>
<blockquote>
<p><code>二级域名.顶级域名.</code>，<code>三级域名.二级域名.顶级.域名</code>……</p>
</blockquote>
<p>一个域名至少包含一个二级域名（iweeek）和一个顶级域名（com），顶级域名有时候也叫作一级域名。</p>
<p>需要注意的是，一个完整字符串 <code>三级域名.二级域名.顶级域名.</code> 就是一个域名，例如：<code>static.iweeek.com.</code> 这个是一个三级域名。</p>
<h2 id="子域名（Subdomain-Name）"><a href="#子域名（Subdomain-Name）" class="headerlink" title="子域名（Subdomain Name）"></a>子域名（Subdomain Name）</h2><p>在「我们通常所说的域名」的基础上，又加入了子域名的概念，在「一个」域名的前面加上新的字段，代表这个域名下的某个特定的主机或者协议。最常用的就是 WWW 协议，例如：<a href="http://www.iweeek.com">www.iweeek.com</a> 就是 iweeek.com 的一个子域名，<strong>GitHub Pages</strong> 推荐使用 <code>www</code> 子域名作为自定义域名。</p>
<p>需要注意的是，子域名的概念在不同的域名中是不同的，请看上图 <code>pc15.tek.iweeek.com.</code> 的例子，<code>tek.iweeek.com.</code>是<code>iweeek.com.</code>的子域名，而<code>pc15.tek.iweeek.com.</code>则是<code>tek.iweeek.com.</code>的子域名，它们的上一级域名是不同的，这是相对的一个概念。</p>
<hr>
<h2 id="域名系统（Domain-Name-System-DNS）"><a href="#域名系统（Domain-Name-System-DNS）" class="headerlink" title="域名系统（Domain Name System - DNS）"></a>域名系统（Domain Name System - DNS）</h2><h3 id="什么是域名系统？"><a href="#什么是域名系统？" class="headerlink" title="什么是域名系统？"></a>什么是域名系统？</h3><p><strong>域名系统</strong>是互联网的一项服务。</p>
<h3 id="干什么用的？"><a href="#干什么用的？" class="headerlink" title="干什么用的？"></a>干什么用的？</h3><p><strong>域名系统</strong>的主要任务就是所谓的域名解析，通俗点说，就是你给域名系统一个域名，它会给你一个 IP 地址。</p>
<p>在域名解析的过程中，简单的理解就是把一个人类记得住的域名变成网络中机器认识的 IP 地址。</p>
<h3 id="DNS-是如何工作的？"><a href="#DNS-是如何工作的？" class="headerlink" title="DNS 是如何工作的？"></a>DNS 是如何工作的？</h3><p>DNS 服务器上存在一个数据库，数据库里保存了已经解析过的域名和 IP 地址相互映射记录，这么多 DNS 服务器就组成了一个<strong>分布式数据库</strong>。</p>
<p>还是以查询 <code>pc15.tek.iweeek.com.</code> 为例：</p>
<ol>
<li>客户端发送查询报文 <code>query pc15.tek.iweeek.com.</code> 至 DNS 服务器，DNS 服务器首先检查自身缓存，如果存在记录则直接返回结果。</li>
<li>如果记录不存在，则 DNS 服务器向根域名服务器发送查询报文 <code>query pc15.tek.iweeek.com.</code>，根域名服务器返回 <code>.com</code> 域的权威域名服务器地址，这一级首先会返回的是顶级域名的权威域名服务器。</li>
<li>DNS服务器向 <code>.com</code> 域的权威域名服务器发送查询报文 <code>query pc15.tek.iweeek.com.</code>，得到 <code>.iweeek.com</code> 域的权威域名服务器地址。</li>
<li>DNS服务器向 <code>.iweeek.com</code> 域的权威域名服务器发送查询报文 <code>query pc15.tek.iweeek.com.</code>，得到 <code>.tek.iweeek.com</code> 域的权威域名服务器地址。</li>
<li>DNS服务器向 <code>.tek.iweeek.com</code> 域的权威域名服务器发送查询报文 <code>query pc15.tek.iweeek.com.</code>，得到主机 <code>pc15</code> 的A记录，存入自身缓存并返回给客户端。</li>
<li>下次如果再次查询 <code>pc15.tek.iweeek.com.</code> ，那么第 <code>1</code> 步，DNS 服务器可以在缓存中找到这条记录，就直接返回给客户端了。</li>
</ol>
<h2 id="A-记录（A-Record）"><a href="#A-记录（A-Record）" class="headerlink" title="A 记录（A Record）"></a>A 记录（A Record）</h2><blockquote>
<p>An A record maps a domain name to the IP address (IPv4) of the computer hosting the domain. Simply put, an A record is used to find the IP address of a computer connected to the internet from a name.</p>
</blockquote>
<p><strong>A 记录</strong>在 DNS 中的意义就是，域名到 IP 地址的转换。所以，当我们在 DNS 服务器中添加一个 A 记录时，是告诉服务器，将这个特定的域名映射到一个 IP 地址。</p>
<h2 id="CNAME-记录（Canonical-Name-Record）"><a href="#CNAME-记录（Canonical-Name-Record）" class="headerlink" title="CNAME 记录（Canonical Name Record）"></a>CNAME 记录（Canonical Name Record）</h2><p><strong>CNAME</strong> 的意思，简单来说就是<strong>别名</strong>，即将一个域名映射到另一个域名（区别于 A 记录的 IP）。CNAME 通常有两种用法：</p>
<ul>
<li><p><strong>不同顶级域名之间的跳转</strong><br>例如：我的域名是 <code>iweeek.com</code>（顶级域名为 <code>.com</code>），如果我希望，当我访问这个域名的时候，其实是访问我的 <code>iweeek.github.io</code>（顶级域名为 <code>.io</code>），虽然它们是不同的顶级域名，但是我可以用 <strong>CNAME</strong> 记录映射。</p>
</li>
<li><p><strong>将一个子域名映射到域名</strong><br>例如：我的域名是 <code>iweeek.com</code>，如果我希望，当我访问 <code>www.iweeek.com</code> （一个 www 子域名）的时候，仍旧访问 <code>iweeek.com</code> 这个域名指向的内容，就可以利用 <strong>CNAME</strong> 将 <code>www.iweeek.com</code> 映射到 <code>iweeek.com</code>。</p>
</li>
</ul>
<p>例如我在阿里云中的域名配置：</p>
<p><img src="http://p748dqat4.bkt.clouddn.com/dns-iweeek.png" alt=""></p>
<p>A 记录的主机记录是 <code>@</code>，表示为空的意思，由于这是 <code>iweeek.com</code> 的解析设置，所以相当于：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iweeek.com.           A       151.101.229.147</span><br><span class="line">www.iweeek.com.       CNAME   iweeek.com.</span><br></pre></td></tr></table></figure>
<p><code>151.101.229.147</code> 是我的 <code>iweeek.github.io</code> 的 IP 地址。上面的例子也就是说，域名 <code>iweeek.com.</code> 映射到 <code>151.101.229.147</code> 这个 GitHub 服务器，然后 <code>www.iweeek.com.</code> 映射到 <code>iweeek.com.</code>。</p>
<h2 id="NS-记录（Name-Serve-Record）"><a href="#NS-记录（Name-Serve-Record）" class="headerlink" title="NS 记录（Name Serve Record）"></a>NS 记录（Name Serve Record）</h2><p><strong>NS 记录</strong>简单来说，就是声明谁来负责解析我这个域名，指定了负责解析我这个域名的域名服务器地址。这条记录赋予我们一个特殊的能力，就是，我可以让自己指定一个 DNS 解析服务器，而不一定使用域名提供商自带的域名解析服务器。一般来讲，是两条记录，一条主服务器，一条副服务器，例如我在阿里云服务里分配的 DNS 服务器就是<code>dns3.hichina.com</code>，<code>dns4.hichina.com</code>。</p>
<blockquote>
<p>“If you want to know about hosts in the foo.com zone, ask the name server ns1.bar.com”</p>
</blockquote>
<p>其大致意思是：如果你想知道谁负责 <code>foo.com</code>这个域名的解析，就找<code>ns1.bar.com</code>域名服务器。</p>
<h2 id="DNS-解析的工作流程"><a href="#DNS-解析的工作流程" class="headerlink" title="DNS 解析的工作流程"></a>DNS 解析的工作流程</h2><p>例如使用我的子域名进行 DNS 追踪，命令如下：</p>
<p><code>dig +trace www.iweeek.com</code></p>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; +trace www.iweeek.com</span><br><span class="line">;; global options: +cmd</span><br><span class="line">.			218335	IN	NS	a.root-servers.net.</span><br><span class="line">.			218335	IN	NS	b.root-servers.net.</span><br><span class="line">.			218335	IN	NS	c.root-servers.net.</span><br><span class="line">...</span><br><span class="line">;; Received 228 bytes from 192.168.199.1#53(192.168.199.1) in 156 ms</span><br><span class="line"></span><br><span class="line">com.			172800	IN	NS	a.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	b.gtld-servers.net.</span><br><span class="line">com.			172800	IN	NS	c.gtld-servers.net.</span><br><span class="line">...</span><br><span class="line">;; Received 492 bytes from 198.97.190.53#53(198.97.190.53) in 679 ms</span><br><span class="line"></span><br><span class="line">iweeek.com.		172800	IN	NS	dns3.hichina.com.</span><br><span class="line">iweeek.com.		172800	IN	NS	dns4.hichina.com.</span><br><span class="line">;; Received 334 bytes from 192.31.80.30#53(192.31.80.30) in 650 ms</span><br><span class="line"></span><br><span class="line">www.iweeek.com.		600	IN	CNAME	iweeek.com.</span><br><span class="line">;; Received 56 bytes from 140.205.41.14#53(140.205.41.14) in 31 ms</span><br></pre></td></tr></table></figure>
<p>可以看到，以查找域名地址 <code>www.iweeek.com</code> 为例。首先，从最权威的 13 台根域名服务器查找，其中包含互联网上所有顶级域名的域名服务器信息。接着，在查询其中一个根域名服务器的时候，根域名服务器可能不会直接包含<code>www.iweeek.com</code>的记录，在这种情况下，根域名服务器会提供一些<code>com.</code>顶级域名服务器的<strong>引用信息（referral）</strong>，再次查询其中一个<code>com.</code>时，解析器可能会再次提供<code>iweeek.com.</code>（NS 记录表示域名服务器<code>dns3.hichina.com.</code>将会处理它）的一些信息。于是它会再次查询<code>www.iweeek.com.</code>（这是一个 CNAME 记录），这时，域名服务器正好有<code>iweeek.com.</code>的权威数据（authoritative data），递归查找到此终止。</p>
<p>这时，再次请求另一个域名，例如：<code>blog.iweeek.com.</code>，由于解析器之前已确定<code>com.</code>的权威名称服务器（authoritative name servers），所以这次它不需要从头开始解决过程，而是从域（zone）<code>com.</code>开始查找，从而避免对根域名服务器的另一个查询。</p>
<h2 id="告诉-GitHub-你的域名"><a href="#告诉-GitHub-你的域名" class="headerlink" title="告诉 GitHub 你的域名"></a>告诉 GitHub 你的域名</h2><p>在项目下建立一个名为 <code>CNAME</code> （注意一定要大写）文件，在其中写上给你的主页分配的域名地址，例如：<code>example.com</code> 或者 <code>blog.example.com</code>，不能是 <code>http://iweeek.com</code>。这个操作的实际作用是什么？</p>
<ul>
<li>当直接访问 <code>github.io</code> 的时候，GitHub 知道如何 redirect 到哪里。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Rebuilt URL to: iweeek.github.io/</span><br><span class="line">  Trying 151.101.229.147...</span><br><span class="line">TCP_NODELAY set</span><br><span class="line">Connected to iweeek.github.io (151.101.229.147) port 80 (#0)</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: iweeek.github.io</span><br><span class="line">User-Agent: curl/7.54.0</span><br><span class="line">Accept: */*</span><br><span class="line">HTTP/1.1 301 Moved Permanently</span><br><span class="line">Server: GitHub.com</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Location: https://www.iweeek.com/</span><br><span class="line">X-GitHub-Request-Id: EA10:30DF:E210B:F6A83:5AD6B9D7</span><br><span class="line">Content-Length: 178</span><br><span class="line">Accept-Ranges: bytes</span><br><span class="line">Date: Wed, 18 Apr 2018 03:22:00 GMT</span><br><span class="line">Via: 1.1 varnish</span><br><span class="line">Age: 0</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Served-By: cache-hnd18730-HND</span><br><span class="line">X-Cache: MISS</span><br><span class="line">X-Cache-Hits: 0</span><br><span class="line">X-Timer: S1524021720.208656,VS0,VE116</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Fastly-Request-ID: dc9abadf58c0e71cf1d9c4de07b6607932f15f1b</span><br></pre></td></tr></table></figure>
<p>也就是说，当你指定了 <strong>CNAME</strong> 之后，我们再次访问一个 <code>github.io</code> 的网站时，我们会发现，域名自动变成了我们指定的自定义域名。这是因为 <strong>CNAME</strong> 中指出了自定义域名是什么，所以，当我们访问 <code>github.io</code>的时候，会触发http 301。</p>
<ul>
<li>当用你的域名访问的时候，github知道去哪个 io 里面找</li>
</ul>
<p>当然，当我们直接使用自定义域名访问的时候，由于 <code>DNS</code> 服务器中 <strong>CNAME</strong> 的配置，最终我们会访问 <code>github.io</code>的主机，当主机收到我们的请求的时候，会拿我们 <code>http</code> 请求中的 <code>host</code> 和 <code>repository</code> 中的 <strong>CNAME 文件</strong> 比较，从而知道，当前的域名应该访问哪个具体的 <code>xxx.github.io</code> 的内容。</p>
<hr>
<p>呼~~，总算是写完了，在找资料上面花了很长时间，不过也算是拼拼凑凑地完成了。在此感谢 <a href="http://winterTTr.me/2015/10/23/from-dns-to-github-custom-domain/index.html" target="_blank" rel="noopener">winterttr</a>，我只是在他的基础上，添加了一些自己的理解。</p>
<hr>
<p>References：</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name" target="_blank" rel="noopener">Fully qualified domain name - wikipedia</a></li>
<li><a href="http://www.omnisecu.com/tcpip/fully-qualified-domain-name-fqdn-and-partially-qualified-domain-name-pqdn.php" target="_blank" rel="noopener">What is Fully Qualified Domain Name?</a></li>
<li><a href="https://en.wikipedia.org/wiki/DNS_root_zone" target="_blank" rel="noopener">DNS Root Zone</a></li>
<li><a href="https://en.wikipedia.org/wiki/DNS_zone" target="_blank" rel="noopener">DNS Zone</a></li>
<li><a href="http://man.chinaunix.net/develop/rfc/default.htm" target="_blank" rel="noopener">中文 RFC 文档</a></li>
<li><a href="https://en.wikipedia.org/wiki/Subdomain" target="_blank" rel="noopener">Subdomain - wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Top-level_domain" target="_blank" rel="noopener">Top-level domain - wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Domain_Name_System" target="_blank" rel="noopener">Domain Name System - wikipedia</a></li>
<li><a href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/" target="_blank" rel="noopener">Using a custom domain with GitHub Pages - Github</a></li>
<li><a href="https://support.dnsimple.com/articles/differences-a-cname-records/" target="_blank" rel="noopener">Differences-a-cname-records</a></li>
<li><a href="https://superuser.com/questions/715632/how-does-dig-trace-actually-work" target="_blank" rel="noopener">How does dig +trace actually work?</a></li>
</ul>

      
    </div>

    
      
      

  <div class="post-copyright">
    <h3> 文档信息 </h3>
    <p class="copyright-item">
      <span>许可协议: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="http://www.iweeek.com">毁于随</a>
    </p>
    <!-- <p class="copyright-item">
      <span>原文链接: </span>
      <a href="http://www.iweeek.com/2018/04/18/other/understanding-the-domain/">http://www.iweeek.com/2018/04/18/other/understanding-the-domain/</a>
    </p> -->
    <p class="copyright-item">
      <span>发表日期: </span>
      <a href=""> 2018年04月18日</a>
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags"> 分类：
            
              <a href="/tags/域名/">域名</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/04/19/design-pattern/initialization-on-demand-holder-idiom/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">单例模式——双重检查</span>
        <span class="prev-text nav-mobile">上一篇</span>
        ：上一篇
      </a>
    
    
      <a class="next" href="/2018/04/17/other/three-successful-transgenic-companies/">
        下一篇：
        <span class="next-text nav-default">《浪潮之巅》读后感（三）—— 成功的转基因</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      
  
  

  



      

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

  
    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  






  
    <script type="text/javascript" src="/js/src/nijun/nijun.js"></script>
  


<script src="/js/src/fold.js"></script>
<script src="/js/src/post-detail.js"></script>
<script src="/js/src/tags.js"></script>

<!-- TODO 2018年05月28日12:35:38 解决了 photoswipe 找不到的问题  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" rel="stylesheet">


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

    
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

  </body>
</html>